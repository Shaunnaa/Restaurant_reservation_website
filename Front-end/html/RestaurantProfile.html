<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>

    <!-- Tailwind css-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../css/index.css">

    <!-- ionicon-->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>

<body>
    <header class="bg-[#BC3535] fixed w-full z-50">
        <!--fixed = fixed position | w-full = The full width of the viewport | z-50 = Stays on top of other elements-->
        <navbar-component></navbar-component>
    </header>

    <!-- Main Content -->
    <main class="place-items-center gap-11 px-9 pb-9 pt-32">
        <!-- Profile Info Section -->
        <section class="grid grid-cols-[40%_60%] gap-11">

            <!-- Opening Hours Section -->
            <div class="container mx-auto px-4 py-8">
                <!-- Profile -->
                <div class="flex items-center justify-center">
                    <div
                        class="relative shadow-xl hover:shadow-2xl transition-shadow duration-500 ease-in-out rounded-xl p-5">
                        <!-- Image Preview Container -->
                        <div class="flex items-center justify-center">
                            <!-- Default image or user uploaded image -->
                            <img id="userImage"
                                src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w0NzEyNjZ8MHwxfHNlYXJjaHwyfHxhdmF0YXJ8ZW58MHwwfHx8MTY5MTg0NzYxMHww&ixlib=rb-4.0.3&q=80&w=1080"
                                class="w-32 h-32 object-cover rounded-full transition-all duration-500 transform group-hover:w-36 group-hover:h-36" />
                        </div>
                        <!-- File Upload Input, hidden -->
                        <div class="pt-4 flex items-center justify-center">
                            <button type="button"
                                class="text-gray-900 hover:text-white border border-gray-800 hover:bg-gray-900 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-gray-600 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-800">Upload</button>
                        </div>
                    </div>
                </div>

                <!-- Stars -->
                <div class="flex items-center justify-center pt-8">
                    <svg class="w-8 h-8 ms-3 text-yellow-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                        fill="currentColor" viewBox="0 0 22 20">
                        <path
                            d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                    </svg>
                    <svg class="w-8 h-8 ms-3 text-yellow-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                        fill="currentColor" viewBox="0 0 22 20">
                        <path
                            d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                    </svg>
                    <svg class="w-8 h-8 ms-3 text-yellow-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                        fill="currentColor" viewBox="0 0 22 20">
                        <path
                            d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                    </svg>
                    <svg class="w-8 h-8 ms-3 text-yellow-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                        fill="currentColor" viewBox="0 0 22 20">
                        <path
                            d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                    </svg>
                    <svg class="w-8 h-8 ms-3 text-gray-300 dark:text-gray-500" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                        <path
                            d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                    </svg>
                </div>

                <div class="bg-white shadow-md rounded px-4 py-6">
                    <table class="w-full table-auto">
                        <div class="font-bold text-xl mb-2">Open - Close</div>
                        <tr>
                            <td class="text-left">Sunday</td>
                            <td class="text-left">09:30</td>
                            <td class="text-left">23:00</td>
                        </tr>
                        <tr>
                            <td>Monday</td>
                            <td>11:00</td>
                            <td>20:00</td>
                        </tr>
                        <tr>
                            <td>Tuesday</td>
                            <td>11:00</td>
                            <td>20:00</td>
                        </tr>
                        <tr>
                            <td>Wednesday</td>
                            <td>11:00</td>
                            <td>18:00</td>
                        </tr>
                        <tr>
                            <td>Thursday</td>
                            <td>11:00</td>
                            <td>20:00</td>
                        </tr>
                        <tr>
                            <td>Friday</td>
                            <td>11:00</td>
                            <td>20:00</td>
                        </tr>
                        <tr>
                            <td>Saturday</td>
                            <td>10:00</td>
                            <td>21:00</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="pr-16">
                <!-- Section Title -->
                <h2 class="text-3xl font-bold mb-2">Restaurant Profile</h2>
                <h3 class="text-gray-500 mb-4 font-semibold">Welcome back! This is your details.</h3>
                <form id='detail'>

                </form>
            </div>
        </section>
    </main>

    <script src="../js/navbar.js"></script>
    <script>
        // const form = document.getElementById('Edit').closest('form');
        // const nameInput = form.querySelector('input[id="name"]');
        // function updateResource() {
        //     console.log('clicked')

        //     let RID = document.getElementById('RID').dataset.rid;

        //     console.log(RID)

        //     let data = {
        //         RID: RID,
        //         Restaurant_name: nameInput.value,
        //         // Category: document.getElementById('Category').value,
        //         // Descriptions: document.getElementById('Descriptions').value,
        //         // Location: document.getElementById('Location').value,
        //         // Province: document.getElementById('Province').value,
        //         // District: document.getElementById('District').value,
        //         // Subdistrict: document.getElementById('Subdistrict').value,
        //         // Email: document.getElementById('Email').value,
        //         // Passwords: document.getElementById('Passwords').value,
        //         // Phone_num: document.getElementById('Phone_num').value
        //     };

        //     fetch('http://localhost:3040/modify-restaurant', {
        //         method: 'PUT',
        //         headers: {
        //             'Content-Type': 'application/json'
        //         },
        //         body: JSON.stringify(data)
        //     })
        //         .then(response => {
        //             if (!response.ok) {
        //                 throw new Error('Network response was not ok');
        //             }
        //             return response.text();
        //         })
        //         .then(data => {
        //             console.log(data);
        //         })
        //         .catch(error => {
        //             console.error('There was a problem with your fetch operation:', error);
        //         });
        // }  
    </script>
    <script>
        function updateResource() {
            console.log('clicked')

            let RID = document.getElementById('RID').dataset.rid;
            const form = event.target.closest('form')
            const nameInputValue = form.querySelector('input[name="name"]').value;
            const PhoneInputValue = form.querySelector('input[name="phone"]').value;
            const EmailInputValue = form.querySelector('input[name="email"]').value;
            const PasswordInputValue = form.querySelector('input[name="password"]').value;
            const DescriptionInputValue = form.querySelector('input[name="description"]').value;
            console.log(RID)

            let data = {
                RID: RID,
                Restaurant_name: nameInputValue,
                Phone_num: PhoneInputValue,
                Email: EmailInputValue,
                Password: PasswordInputValue,
                Descriptions: DescriptionInputValue,
                // Province: document.getElementById('Province').value,
                // District: document.getElementById('District').value,
                // Subdistrict: document.getElementById('Subdistrict').value,
                // Email: document.getElementById('Email').value,
                // Passwords: document.getElementById('Passwords').value,
                // Phone_num: document.getElementById('Phone_num').value
            };

            fetch('http://localhost:3040/modify-restaurant-restaurant', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.text();
                })
                .then(data => {
                    console.log(data);
                })
                .catch(error => {
                    console.error('There was a problem with your fetch operation:', error);
                });
        }
        fetch('http://localhost:3040/api/all-detail')
            .then(response => response.json())
            .then(data => {
                console.log("data")
                // Update HTML content dynamically with fetched data
                const Detail = document.getElementById('detail');
                function handleClick(event) {
                    // Check if the clicked element is the button
                    if (event.target.id === "Edit") {
                        // Update paragraph content only if it's the button
                        console.log("clicked")
                        updateResource();
                    }
                }
                // Detail.addEventListener("click", handleClick);
                // const Schedule = document.getElementById('schedule');
                data.forEach(item => {
                    // const detail = document.createElement('form');
                    Detail.innerHTML = `
                    <!-- Restaurant Name & Phone Number-->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="name" class="block mb-2 font-semibold">Restaurant Name</label>
                            <input type="text" name = "name" id="name" class="border border-gray-300 rounded-md p-2 w-full"
                                placeholder="${item.Restaurant_name}">
                        </div>
                        <div>
                            <label for="phone" class="block mb-2 font-semibold">Phone Number</label>
                            <input type="tel" name = "phone" id="phone" class="shadow-sm border border-gray-300 rounded-md p-2 w-full"
                                placeholder="${item.Phone_num}">
                        </div>
                    </div>

                    <!-- Email and Password -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div>
                            <label for="email" class="block mb-2 font-semibold">Email</label>
                            <input type="email" name = "email" id="email"
                                class="shadow-sm border border-gray-300 rounded-md p-2 w-full" placeholder="${item.Email}">
                        </div>
                        <div>
                            <label for="password" class="block mb-2 font-semibold">Password</label>
                            <input type="password" name = "password" id="password"
                                class="shadow-sm border border-gray-300 rounded-md p-2 w-full" placeholder="**********">
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="mt-4">
                        <label for="description" class="block mb-2 font-semibold">Description</label>
                        <input type ="textarea" name = "description" id="description" rows="1"
                            class="shadow-sm border border-gray-300 rounded-md p-2 w-full"
                            placeholder="${item.Descriptions}"></textarea>
                    </div>

                    <!-- Address -->
                    <div class="grid grid-cols-1 md:grid-cols-1 gap-4 mt-4">
                        <div>
                            <label for="Location" class="block mb-2 font-semibold">Location</label>
                            <input type="text" id="Location"
                                class="shadow-sm border border-gray-300 rounded-md p-2 w-full"
                                placeholder="Salaya, Nakhon pathom">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                        <div>
                            <label for="province" class="block mb-2 font-semibold">Province</label>
                            <select id="province" class="shadow-sm border border-gray-300 rounded-md p-2 w-full">

                                <!-- Add more options -->
                            </select>
                        </div>
                        <div>
                            <label for="district" class="block mb-2 font-semibold">District</label>
                            <select id="district" class="shadow-sm border border-gray-300 rounded-md p-2 w-full">

                                <!-- Add more options -->
                            </select>
                        </div>
                        <div>
                            <label for="subdistrict" class="block mb-2 font-semibold">Subdistrict</label>
                            <select id="subdistrict" class="shadow-sm border border-gray-300 rounded-md p-2 w-full">
                                <option>${item.Restaurant_name}</option>
                                <!-- Add more options -->
                            </select>
                        </div>
                    </div>

                    <!-- 20 manu -->
                    <div class="mt-8">
                        <div class="shadow-sm border border-gray-300 rounded-md p-2 w-full">
                            <!-- Text with button -->
                            <a class="text-lg font-semibold">The manu in your restaurant: 20 manu</a>
                            <button class="text-black font-semibold">Add more menu</button>
                            <button class="text-red-500 font-semibold">-- Click here --</button>
                        </div>
                    </div>

                    <!-- button -->
                    <div id="RID" data-rid="${item.RID}"></div>
                    <div class="mt-4 grid grid-cols-2 gap-4 justify-center text-center">
                        <a href="/restaurant_management" class="bg-red-500 text-white py-2 px-4 rounded-md item-center">
                            <button id = 'Edit' type="button" onclick = "updateResource()" cless = "item-center">Edit</button>
                        </a>
                        <a href = "./schedule" class="bg-green-500 text-white py-2 px-4 rounded-md item-center">
                            <button cless = "item-center" type = "button" ">Schedule</button>
                        </a>
                    </div>
                    `
                })
            })
            .catch(error => {
                console.error('Error fetching data:', error);
                // Handle error
            });
    </script>

    <script src="../js/footer.js"></script>
</body>

</html>